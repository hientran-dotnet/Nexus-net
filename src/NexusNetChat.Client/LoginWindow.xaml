<Window x:Class="NexusNetChat.Client.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Nexus Chat - Đăng nhập" Height="600" Width="450"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize">
    
    <Window.Resources>
        <!-- Discord Color Palette -->
        <SolidColorBrush x:Key="BackgroundPrimary" Color="#36393F"/>
        <SolidColorBrush x:Key="BackgroundSecondary" Color="#2F3136"/>
        <SolidColorBrush x:Key="BackgroundTertiary" Color="#202225"/>
        <SolidColorBrush x:Key="BackgroundAccent" Color="#4F545C"/>
        
        <SolidColorBrush x:Key="TextNormal" Color="#DCDDDE"/>
        <SolidColorBrush x:Key="TextMuted" Color="#72767D"/>
        <SolidColorBrush x:Key="HeaderPrimary" Color="#FFFFFF"/>
        
        <SolidColorBrush x:Key="BrandExperiment" Color="#5865F2"/>
        <SolidColorBrush x:Key="BrandExperimentHover" Color="#4752C4"/>
        <SolidColorBrush x:Key="Success" Color="#43B581"/>
        <SolidColorBrush x:Key="Danger" Color="#F04747"/>
        
        <!-- Input Field Style -->
        <Style x:Key="InputFieldStyle" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource BackgroundTertiary}"/>
            <Setter Property="Foreground" Value="{StaticResource TextNormal}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BackgroundTertiary}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                        Padding="{TemplateBinding Padding}"
                                        VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="{StaticResource BrandExperiment}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Password Field Style -->
        <Style x:Key="PasswordFieldStyle" TargetType="PasswordBox">
            <Setter Property="Background" Value="{StaticResource BackgroundTertiary}"/>
            <Setter Property="Foreground" Value="{StaticResource TextNormal}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BackgroundTertiary}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                        Padding="{TemplateBinding Padding}"
                                        VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="{StaticResource BrandExperiment}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Button Style -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource BrandExperiment}"/>
            <Setter Property="Foreground" Value="{StaticResource HeaderPrimary}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource BrandExperimentHover}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#3C45A5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Link Button Style -->
        <Style x:Key="LinkButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource BrandExperiment}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <ContentPresenter/>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="TextBlock.TextDecorations" Value="Underline"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Border Background="{StaticResource BackgroundPrimary}" CornerRadius="8">
        <Grid>
            <!-- Title Bar -->
            <Border Height="32" VerticalAlignment="Top" Background="{StaticResource BackgroundSecondary}" 
                    CornerRadius="8,8,0,0" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="Nexus Chat" Foreground="{StaticResource HeaderPrimary}" 
                               VerticalAlignment="Center" Margin="16,0" FontWeight="SemiBold"/>
                    <Button Content="×" HorizontalAlignment="Right" VerticalAlignment="Center"
                            Width="32" Height="32" Background="Transparent" BorderThickness="0"
                            Foreground="{StaticResource TextNormal}" Click="Close_Click"
                            FontSize="16" Cursor="Hand"/>
                </Grid>
            </Border>
            
            <!-- Main Content -->
            <Grid Margin="0,32,0,0">
                <!-- Login Form -->
                <StackPanel x:Name="LoginPanel" Margin="32" VerticalAlignment="Center">
                    <!-- Logo/Title -->
                    <TextBlock Text="Chào mừng trở lại!" 
                               FontSize="28" FontWeight="Bold" 
                               Foreground="{StaticResource HeaderPrimary}"
                               HorizontalAlignment="Center" Margin="0,0,0,8"/>
                    
                    <TextBlock Text="Chúng tôi rất vui khi thấy bạn trở lại!" 
                               FontSize="16" 
                               Foreground="{StaticResource TextMuted}"
                               HorizontalAlignment="Center" Margin="0,0,0,32"/>
                    
                    <!-- Email/Username Field -->
                    <TextBlock Text="EMAIL HOẶC TÊN NGƯỜI DÙNG" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMuted}" 
                               Margin="0,0,0,8"/>

                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" x:Name="LoginUsernameTextBox" Style="{StaticResource InputFieldStyle}"
                             Margin="0,0,0,20"/>
                    
                    <!-- Password Field -->
                    <TextBlock Text="MẬT KHẨU" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMuted}" 
                               Margin="0,0,0,8"/>
                    <PasswordBox x:Name="LoginPasswordBox" Style="{StaticResource PasswordFieldStyle}"
                                 Margin="0,0,0,8"/>
                    
                    <!-- Forgot Password -->
                    <Button Content="Quên mật khẩu?" Style="{StaticResource LinkButtonStyle}"
                            HorizontalAlignment="Left" Margin="0,0,0,20"
                            Click="ForgotPassword_Click"/>
                    
                    <!-- Login Button -->
                    <Button Content="Đăng nhập" Style="{StaticResource PrimaryButtonStyle}"
                            Margin="0,0,0,8" Click="Login_Click"/>
                    
                    <!-- Register Link -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                        <TextBlock Text="Cần một tài khoản? " 
                                   Foreground="{StaticResource TextMuted}"/>
                        <Button Content="Đăng ký" Style="{StaticResource LinkButtonStyle}"
                                Click="ShowRegister_Click"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- Register Form -->
                <StackPanel x:Name="RegisterPanel" Margin="32" VerticalAlignment="Center" Visibility="Collapsed">
                    <!-- Title -->
                    <TextBlock Text="Tạo tài khoản" 
                               FontSize="28" FontWeight="Bold" 
                               Foreground="{StaticResource HeaderPrimary}"
                               HorizontalAlignment="Center" Margin="0,0,0,32"/>
                    
                    <!-- Full Name Field -->
                    <TextBlock Text="HỌ VÀ TÊN" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMuted}" 
                               Margin="0,0,0,8"/>
                    <TextBox x:Name="RegisterFullNameTextBox" Style="{StaticResource InputFieldStyle}"
                             Margin="0,0,0,20"/>
                    
                    <!-- Email Field -->
                    <TextBlock Text="EMAIL" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMuted}" 
                               Margin="0,0,0,8"/>
                    <TextBox x:Name="RegisterEmailTextBox" Style="{StaticResource InputFieldStyle}"
                             Margin="0,0,0,20"/>
                    
                    <!-- Username Field -->
                    <TextBlock Text="TÊN NGƯỜI DÙNG" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMuted}" 
                               Margin="0,0,0,8"/>
                    <TextBox x:Name="RegisterUsernameTextBox" Style="{StaticResource InputFieldStyle}"
                             Margin="0,0,0,20"/>
                    
                    <!-- Password Field -->
                    <TextBlock Text="MẬT KHẨU" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMuted}" 
                               Margin="0,0,0,8"/>
                    <PasswordBox x:Name="RegisterPasswordBox" Style="{StaticResource PasswordFieldStyle}"
                                 Margin="0,0,0,20"/>
                    
                    <!-- Confirm Password Field -->
                    <TextBlock Text="XÁC NHẬN MẬT KHẨU" 
                               FontSize="12" FontWeight="SemiBold"
                               Foreground="{StaticResource TextMuted}" 
                               Margin="0,0,0,8"/>
                    <PasswordBox x:Name="RegisterConfirmPasswordBox" Style="{StaticResource PasswordFieldStyle}"
                                 Margin="0,0,0,20"/>
                    
                    <!-- Register Button -->
                    <Button Content="Đăng ký" Style="{StaticResource PrimaryButtonStyle}"
                            Margin="0,0,0,8" Click="Register_Click"/>
                    
                    <!-- Login Link -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                        <Button Content="Đã có tài khoản?" Style="{StaticResource LinkButtonStyle}"
                                Click="ShowLogin_Click"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- Error Message -->
                <TextBlock x:Name="ErrorMessageTextBlock" 
                           Foreground="{StaticResource Danger}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Bottom"
                           Margin="32,0,32,16"
                           TextWrapping="Wrap"
                           Visibility="Collapsed"/>
            </Grid>
        </Grid>
    </Border>
</Window>
